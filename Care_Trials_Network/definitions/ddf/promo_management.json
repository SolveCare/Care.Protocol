{
  "ddf_type": "promo_management",
  "meta_data": {
    "description": "Promo management"
  },
  "messages": [
    {
      "message_category": "PROMO",
      "message_type": "MANAGEMENT",
      "meta_data": {
        "description": "Promo management",
        "indices": "promo_management"
      },
      "events": [],
      "attributes": [
        {
          "name": "NCTId",
          "description": "NCTId",
          "required": true,
          "index_field": true,
          "type": "string",
          "data_location": "NCTId"
        },
        {
          "name": "SiteID",
          "description": "SiteID",
          "required": true,
          "index_field": true,
          "type": "string",
          "data_location": "SiteID"
        },
        {
          "name": "PromoID",
          "description": "PromoID",
          "required": true,
          "index_field": true,
          "type": "string",
          "data_location": "PromoID"
        },
        {
          "name": "Code",
          "description": "promocode, generated by BDM",
          "required": false,
          "index_field": true,
          "type": "string",
          "data_location": "Code"
        },
        {
          "name": "IssueDate",
          "description": "date, when code was issued",
          "required": false,
          "index_field": true,
          "type": "string",
          "data_location": "IssueDate"
        },
        {
          "name": "ExpirationDate",
          "description": "date, when code will be expired",
          "required": false,
          "index_field": true,
          "type": "string",
          "data_location": "ExpirationDate"
        },
        {
          "name": "TotalAmount",
          "description": "amount, which can be spent by site using this promocode",
          "required": false,
          "index_field": true,
          "type": "string",
          "data_location": "TotalAmount"
        },
        {
          "name": "Issuer",
          "description": "BDM, which issued this code",
          "required": false,
          "index_field": true,
          "type": "string",
          "data_location": "Issuer"
        },
        {
          "name": "Comments",
          "description": "additional info provided by BDM",
          "required": false,
          "index_field": false,
          "type": "string",
          "data_location": "Comments"
        }
      ]
    }
  ],
  "integrations": [
    {
      "type": "hubspot",
      "message_category": "PROMO",
      "message_type": "MANAGEMENT",
      "schema": {
        "schema": {
          "name": "promo_management_table",
          "description": "Promo Management Table",
          "labels": {
            "plural": "Promo Management",
            "singular": "Promo Management"
          },
          "requiredProperties": [
            "site_id",
            "trial_id",
            "promo_id",
            "code",
            "issue_date",
            "expiration_date",
            "total_amount",
            "issuer"
          ],
          "searchableProperties": [
            "site_id",
            "trial_id",
            "promo_id",
            "code",
            "expiration_date",
            "total_amount",
            "issuer"
          ],
          "primaryDisplayProperty": "promo_id",
          "secondaryDisplayProperties": [
            "site_id",
            "code"
          ],
          "properties": [
            {
              "name": "site_id",
              "label": "Site ID",
              "type": "string",
              "displayOrder": 1
            },
            {
              "name": "trial_id",
              "label": "Trial ID",
              "type": "string",
              "displayOrder": 2
            },
            {
              "name": "promo_id",
              "label": "Promo ID",
              "type": "string",
              "isPrimaryDisplayLabel": true,
              "hasUniqueValue": true,
              "displayOrder": 3
            },
            {
              "name": "code",
              "label": "Code",
              "type": "string",
              "displayOrder": 4
            },
            {
              "name": "issue_date",
              "label": "IssueDate",
              "type": "date",
              "fieldType": "date",
              "displayOrder": 5
            },
            {
              "name": "expiration_date",
              "label": "ExpirationDate",
              "type": "date",
              "fieldType": "date",
              "displayOrder": 6
            },
            {
              "name": "total_amount",
              "label": "Total Amount",
              "type": "number",
              "fieldType": "number",
              "showCurrencySymbol": false,
              "displayOrder": 7
            },
            {
              "name": "issuer",
              "label": "Issuer",
              "type": "string",
              "displayOrder": 8
            },
            {
              "name": "comments",
              "label": "Comments",
              "type": "string",
              "displayOrder": 9
            }
          ]
        },
        "association": {
          "name": "promo_management_to_sites",
          "reference": "site_info_table",
          "association_keys": [
            "site_id"
          ]
        }
      },
      "mapping": [
        {
          "attribute": "SiteID",
          "ext_name": "site_id"
        },
        {
          "attribute": "NCTId",
          "ext_name": "trial_id"
        },
        {
          "attribute": "PromoID",
          "ext_name": "promo_id"
        },
        {
          "attribute": "Code",
          "ext_name": "code"
        },
        {
          "attribute": "IssueDate",
          "ext_name": "issue_date"
        },
        {
          "attribute": "ExpirationDate",
          "ext_name": "expiration_date"
        },
        {
          "attribute": "TotalAmount",
          "ext_name": "total_amount"
        },
        {
          "attribute": "Issuer",
          "ext_name": "issuer"
        }
      ],
      "actions": [
        {
          "type": "import",
          "operation_type": "UPSERT",
          "primary_keys": [
            "PromoID"
          ],
          "skip_for_update": [
            "SiteID",
            "NCTId"
          ]
        }
      ]
    }
  ]
}